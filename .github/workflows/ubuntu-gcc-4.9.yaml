#on: [push, pull_request]
on: [push]

jobs:
  compile:
    name: Compile site assets
    runs-on: ubuntu-latest
    steps:
      - name: Check out the repo
        uses: actions/checkout@v2
      - name: Run the build process with Docker
        uses: addnab/docker-run-action@v3
        with:
          image: ubuntu:16.04
          run: |
             apt update  \
                && apt upgrade -y \
                && apt install -y \
                    ninja-build \
                    software-properties-common \
                    python3-dev \
                    python3-pip\
                && apt clean \
                && add-apt-repository -y ppa:ubuntu-toolchain-r/test \
                && apt update  \
                && apt install -y gcc-4.9 g++-4.9  \
                && update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 100 \
                && update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.9 100 \
                && rm -rf /var/lib/apt/lists/* \
                && pip3 install --upgrade pip==20.3.4 \
                && pip3 install --no-cache-dir conan==1.45.0 cmake==3.21.0